
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdn.datatables.net/2.1.5/css/dataTables.bootstrap5.css">
<link rel="stylesheet" href="estilos.css">

<title>Administracion de Ventas</title>

<div class ="container">


        <!-- <h1>Carrito de compras</h1> -->
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
            <h2>Carrito de compras</h2> 
            <h2> Bienvenido:
              <% if (usuario) {%>
                <span class="badge bg-dark"><%= usuario.nombre %></span>
              <% } %>  
            </h2>
          </div>


        <section id="contenedor" class=" contenedor">
            <!-- Contenedor de productos -->
            <div id="contenedor-items">
                <!-- tabla de servicios -->
                <table id="contenedor-items-table-1" class="table table table-bordered table-striped align-middle text-center">
                    <thead class="table-dark">
                        <tr>
                            <th class=" align-middle text-center" colspan="5">Servicios</th> </tr>
                        <tr>
                            <th scope="col">Item</th>
                            <th scope="col">imagen de referencia</th>
                            <th scope="col">Precio</th>
                            <th scope="col">Tipo de venta</th>
                            <th scope="col">Seleccionar</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="titulo-item " id="titulo-item"><span>Corte cabello y barba</span></td>
                            <td><img src="img/13.png" id="img-item" class="img-fluid mx-auto" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td class="precio-item" id="precio-item"><span >$32.000</span></td>
                            <td><span id="tventa">servicio</span></td>
                            <td  id="boton-item"><button class="btn btn-dark" >Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Corte de cabello</span></td>
                            <td><img src="img/11.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td><span class="precio-item" id="precio-item">$22.000</span></td>
                            <td><span id="tventa">servicio</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Arreglo de Barba</span></td>
                            <td><img src="img/12.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td> <span class="precio-item" id="precio-item">$15.000</span></td>
                            <td><span id="tventa">servicio</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>

                    </tbody>
                </table>
                <!-- tabla de productos -->
                <table  id="contenedor-items-table-2" class="table table table-bordered table-striped align-middle text-center">
                    <thead class="table-dark"> <!--color encabezado de la  tabla -->
                        <tr><th class=" align-middle text-center"  colspan="5">Productos</th> </tr>
                        <tr >
                            <th scope="col">Item</th>
                            <th scope="col">imagen de referencia</th>
                            <th scope="col">Precio</th>
                            <th scope="col" >Tipo de venta</th>
                            <th scope="col">Seleccionar</th>
                        </tr>
                    </thead>
            
                    <tbody>                
                        <tr>
                            <td class="titulo-item " id="titulo-item"><span>Cera Premium Moldeadora</span></td>
                            <td><img src="img/4.png" id="img-item" class="img-fluid mx-auto" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td class="precio-item" id="precio-item"><span >$25.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td  id="boton-item"><button class="btn btn-dark" >Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Cera Premium Moldeadora</span></td>
                            <td><img src="img/5.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td><span class="precio-item" id="precio-item">$25.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Tonico Barba Larga</span></td>
                            <td><img src="img/6.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td> <span class="precio-item" id="precio-item">$47.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">kit1: Cuidado Capilar</span></td>
                            <td><img src="img/10.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td> <span class="precio-item" id="precio-item">$159.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Kit2: Completo</span></td>
                            <td><img src="img/7.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td>  <span class="precio-item" id="precio-item">$32.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">BIO Aceite Barba Larga</span></td>
                            <td><img src="img/9.png" id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td>  <span class="precio-item" id="precio-item">$30.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                        <tr>
                            <td><span class="titulo-item" id="titulo-item">Shampoo y acondicionador Barba Larga</span></td>
                            <td><img src="img/8.png"id="img-item" class="img-fluid mx-auto mt-4" style="width: 85px; height: 85px;" alt="logo"></td>
                            <td>  <span class="precio-item" id="precio-item">$39.000</span></td>
                            <td><span id="tventa">producto</span></td>
                            <td> <button class="btn btn-dark" id="boton-item">Agregar al Carrito</button></td>
                        </tr>
                    </tbody>
                </table>

            </div>

            <!-- Carrito de Compras -->
            <div id="carrito" >
                <div class="header-carrito">
                    <h2>Tu Carrito</h2>
                </div>
            <!-- lista de items agregados al carrito con javascript-->
                <div id="carrito-items" class="carrito-items">
                    <!-- 
                    <div class="carrito-item">
                        <img src="img/boxengasse.png" width="80px" alt="">
                        <div class="carrito-item-detalles">
                            <span class="carrito-item-titulo">Box Engasse</span>
                            <div class="selector-cantidad">
                                <i class="fa-solid fa-minus restar-cantidad"></i>
                                <input type="text" value="1" class="carrito-item-cantidad" disabled>
                                <i class="fa-solid fa-plus sumar-cantidad"></i>
                            </div>
                            <span class="carrito-item-precio">$15.000,00</span>
                        </div>
                    <span class="btn-eliminar">
                            <i class="fa-solid fa-trash"></i>
                    </span>
                    </div>
                    <div class="carrito-item">
                        <img src="img/skinglam.png" width="80px" alt="">
                        <div class="carrito-item-detalles">
                            <span class="carrito-item-titulo">Skin Glam</span>
                            <div class="selector-cantidad">
                                <i class="fa-solid fa-minus restar-cantidad"></i>
                                <input type="text" value="3" class="carrito-item-cantidad" disabled>
                                <i class="fa-solid fa-plus sumar-cantidad"></i>
                            </div>
                            <span class="carrito-item-precio">$18.000,00</span>
                        </div>
                    <button class="btn-eliminar">
                            <i class="fa-solid fa-trash"></i>
                    </button>
                    </div>
                    -->
                </div>
                <!-- formulario datos para insertar a la tabla ventas -->
                 <div>
                    <!-- action="/saveVenta" method="POST" -->
                    <form action="/saveVenta" method="POST"> 

                        <div class="mb-3">
                            <label for="user" class="form-label" >Nombre Cliente</label>
                            <label for="usuario" class="form-label"></label>
                            <input type="text" class="form-control" id="nombre_cliente" name="nombre_cliente"  tabindex="1">
                        </div>

                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Tipo de venta:</label><br>
                            <input type="text" class="tipo_venta" id="tipo_venta" name="tipo_venta"  tabindex="1" hidden>
                            
                        </div>

                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Descripcion: </label> <br>
                            <input type="text" class="descripcion-items" id="descripcion" name="descripcion"  tabindex="1" hidden>
                        </div>

                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Valor: </label>
                            <label for="usuario" class="form-label" hidden></label>
                            <input type="text" class="valor" id="valor" name="valor"  tabindex="1" hidden>
                        </div>    

                        <div class="mb-3">
                            <label for="user" class="form-label">Descuentos</label>
                            <label for="usuario" class="form-label"></label>
                            <input type="text" class="descuentos" id="descuentos" name="descuentos" tabindex="1">
                            <button id="aplicarDesc" class="btn btn-dark">Aplicar</button>
                        </div>

                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>ID Vendedor</label>
                            <label for="usuario" class="form-label" hidden></label>
                            <section hidden id="id_vendedor" name="id_vendedor" value="<%=usuario.id %>">
                                <!-- <% if (usuario) {%> -->
                                    <input type="text" id="id_vendedor" name="id_vendedor" value="<%=usuario.id %>"  tabindex="1">
                                    <!-- <%= usuario.id %>
                                  <% } %> -->
                            </section>
                        </div>  
        
                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Vendedor</label>
                            <label for="usuario" class="form-label"hidden></label>
                            <section>
                                <!-- <% if (usuario) {%> -->
                                    <input hidden type="text"  id="vendedor" name="vendedor" value="<%=usuario.nombre %>"  tabindex="1">
                                    <!-- <%= usuario.nombre %>
                                  <% } %> -->
                            </section>
                        </div>
              
                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Sede</label>
                            <label for="usuario" class="form-label" hidden></label>
                            <section>
                                <!-- <% if (usuario) {%> -->
                                    <input type="text"   id="sede" name="sede" value="<%=usuario.sede %>"  tabindex="1" hidden>
                                    <!-- <%= usuario.sede %>
                                  <% } %> -->
                            </section>
                        </div>

                        <div class="mb-3">
                            <label for="user" class="form-label" hidden>Valo total sin formato: </label>
                            <label for="usuario" class="form-label" hidden></label>
                            <input type="text" class="valor_total" id="valor_total" name="valor_total"  tabindex="1" hidden>
                        </div> 

                        <!-- detalle total a pagar carrito -->
                        <div class="carrito-total">
                            <div class="fila">
                                <strong>Total</strong>
                                <input type="text" class="carrito-precio-total" id="valorTotalF" name="valorTotalF"  tabindex="1">
                            </div>
                            <button class="btn-pagar-enviar">Pagar <i class="fa-solid fa-bag-shopping"></i> </button> <br>
                            <!-- <button class="btn-pagar">Limpiar carrito <i class="fa-solid fa-bag-shopping"></i> </button> -->
                            
                        </div>
                        

                    </form>


                 </div>

                </div>
         </section>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/2.1.5/js/dataTables.js"></script>
<script src="https://cdn.datatables.net/2.1.5/js/dataTables.bootstrap5.js"></script>



<script>
new DataTable('#contenedor-items-table-1');
new DataTable('#contenedor-items-table-2');
        
// new DataTable('#contenedor-items-table-1', {
//     columnDefs: [
//         {
//             target: 3,
//             visible: false
//         }
//     ]
// });
// new DataTable('#contenedor-items-table-2',
//  {
//     columnDefs: [
//         {
//             target: 3,
//             visible: false
//         }
//     ]
// }
// );
</script>

<script src="../controllers/carrito.js"></script>